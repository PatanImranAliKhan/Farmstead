{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/flex-layout\";\nimport * as i2 from \"../../services/order.service\";\nimport * as i3 from \"../../services/authorization.service\";\nimport * as i4 from \"../../services/statistics.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/material/progress-bar\";\nimport * as i9 from \"../header/header.component\";\nimport * as i10 from \"../footer/footer.component\";\nfunction OrderComponent_div_2_mat_card_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 6)(1, \"div\", 7)(2, \"div\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\")(5, \"img\", 9)(6, \"br\");\n    i0.ɵɵelementStart(7, \"h4\");\n    i0.ɵɵtext(8, \"Price: \");\n    i0.ɵɵelementStart(9, \"b\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"h4\")(12, \"b\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 10)(15, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function OrderComponent_div_2_mat_card_3_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const product_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.Cacel(product_r4));\n    });\n    i0.ɵɵtext(16, \"Cancel Order\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(17, \"br\");\n    i0.ɵɵelementStart(18, \"h2\", 12);\n    i0.ɵɵtext(19, \"Order Status:\");\n    i0.ɵɵelementStart(20, \"small\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(22, \"mat-progress-bar\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r4 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r4.productname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", product_r4.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r4.image);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", product_r4.quantity, \"\\u00A0*\\u00A0\", product_r4.price, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"= \", product_r4.quantity * product_r4.price, \"\");\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\\u00A0\", product_r4.progress, \"%\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", product_r4.progress);\n  }\n}\nfunction OrderComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 3)(2, \"div\", 4);\n    i0.ɵɵtemplate(3, OrderComponent_div_2_mat_card_3_Template, 23, 8, \"mat-card\", 5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.order);\n  }\n}\nfunction OrderComponent_div_3_mat_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-card\", 17)(1, \"div\", 18)(2, \"div\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"br\")(5, \"img\", 9)(6, \"br\");\n    i0.ɵɵelementStart(7, \"h4\");\n    i0.ɵɵtext(8, \"Price: \");\n    i0.ɵɵelementStart(9, \"b\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"h4\")(12, \"b\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(14, \"br\");\n    i0.ɵɵelementStart(15, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function OrderComponent_div_3_mat_card_2_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const product_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.Cacel(product_r8));\n    });\n    i0.ɵɵtext(16, \"Cancel Order\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"h2\", 12);\n    i0.ɵɵtext(18, \"Order Status:\");\n    i0.ɵɵelementStart(19, \"small\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(21, \"mat-progress-bar\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r8 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r8.productname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", product_r8.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r8.image);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate2(\"\", product_r8.quantity, \"\\u00A0*\\u00A0\", product_r8.price, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"= \", product_r8.quantity * product_r8.price, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\\u00A0\", product_r8.progress, \"%\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", product_r8.progress);\n  }\n}\nfunction OrderComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵtemplate(2, OrderComponent_div_3_mat_card_2_Template, 22, 8, \"mat-card\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.order);\n  }\n}\nfunction OrderComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"h1\", 20);\n    i0.ɵɵtext(2, \"List Was Empty\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let OrderComponent = /*#__PURE__*/(() => {\n  var _class;\n  class OrderComponent {\n    constructor(mediaobserver, orderservice, authorization, StatisticsService) {\n      this.mediaobserver = mediaobserver;\n      this.orderservice = orderservice;\n      this.authorization = authorization;\n      this.StatisticsService = StatisticsService;\n      this.deviceXs = false;\n      this.len = false;\n      this.value = 50;\n      this.order = [];\n      this.statis = [];\n    }\n    ngOnInit() {\n      // this.mediaSub = this.mediaobserver.media$.subscribe((res: MediaChange) => {\n      //   this.deviceXs = res.mqAlias === \"xs\" ? true : false;\n      // });\n      const details = JSON.parse(localStorage.getItem('token'));\n      this.user = details.resp;\n      this.orderservice.GetOneUserOrder(this.user.username, this.user.email).subscribe(data => {\n        this.order = data;\n        this.check();\n        console.log(this.order);\n      });\n      this.GetStatistics();\n    }\n    GetStatistics() {\n      this.StatisticsService.getStatistics().subscribe(data => {\n        this.statis = data[0];\n        console.log(this.statis.Monday.login);\n      });\n    }\n    check() {\n      if (this.order.length == 0) {\n        this.len = true;\n      } else {\n        this.len = false;\n      }\n    }\n    ngOnDestroy() {\n      // this.mediaSub.unsubscribe();\n    }\n    Cacel(product) {\n      this.orderservice.DeleteOrder(product._id).subscribe(data => {\n        console.log(data);\n        // this.change()\n      }, err => {\n        this.Error();\n        console.log(err);\n      });\n      this.order = this.order.filter(x => x._id != product._id);\n      if (this.order.length == 0) {\n        this.len = true;\n      } else {\n        this.len = false;\n      }\n    }\n    change() {\n      var d = new Date();\n      var n = d.getDay();\n      if (n == 1) {\n        const object1 = {\n          Monday: {\n            login: this.statis.Monday.login,\n            Signup: this.statis.Monday.Signup,\n            Orders: this.statis.Monday.Orders - 1\n          }\n        };\n        this.StatisticsService.updateStatistics(object1).subscribe(data => {\n          console.log(data);\n        });\n      } else if (n == 2) {\n        const object1 = {\n          Tuesday: {\n            login: this.statis.Tuesday.login,\n            Signup: this.statis.Tuesday.Signup,\n            Orders: this.statis.Tuesday.Orders - 1\n          }\n        };\n        this.StatisticsService.updateStatistics(object1).subscribe(data => {\n          console.log(data);\n        });\n      } else if (n == 3) {\n        const object1 = {\n          Wednesday: {\n            login: this.statis.Wednesday.login,\n            Signup: this.statis.Wednesday.Signup,\n            Orders: this.statis.Wednesday.Orders - 1\n          }\n        };\n        this.StatisticsService.updateStatistics(object1).subscribe(data => {\n          console.log(data);\n        });\n      } else if (n == 4) {\n        const object1 = {\n          Thursday: {\n            login: this.statis.Thursday.login,\n            Signup: this.statis.Thursday.Signup,\n            Orders: this.statis.Thursday.Orders - 1\n          }\n        };\n        this.StatisticsService.updateStatistics(object1).subscribe(data => {\n          console.log(data);\n        });\n      } else if (n == 5) {\n        const object1 = {\n          Friday: {\n            login: this.statis.Friday.login,\n            Signup: this.statis.Friday.Signup,\n            Orders: this.statis.Friday.Orders - 1\n          }\n        };\n        this.StatisticsService.updateStatistics(object1).subscribe(data => {\n          console.log(data);\n        });\n      } else if (n == 6) {\n        const object1 = {\n          Saturday: {\n            login: this.statis.Saturday.login,\n            Signup: this.statis.Saturday.Signup,\n            Orders: this.statis.Saturday.Orders - 1\n          }\n        };\n        this.StatisticsService.updateStatistics(object1).subscribe(data => {\n          console.log(data);\n        });\n      } else if (n == 7) {\n        const object1 = {\n          Sunday: {\n            login: this.statis.Sunday.login,\n            Signup: this.statis.Sunday.Signup,\n            Orders: this.statis.Sunday.Orders - 1\n          }\n        };\n        this.StatisticsService.updateStatistics(object1).subscribe(data => {\n          console.log(data);\n        });\n      }\n    }\n    Error() {\n      alert('something went wrong !');\n    }\n  }\n  _class = OrderComponent;\n  _class.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.MediaObserver), i0.ɵɵdirectiveInject(i2.OrderService), i0.ɵɵdirectiveInject(i3.AuthorizationService), i0.ɵɵdirectiveInject(i4.StatisticsService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-order\"]],\n    decls: 6,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [\"style\", \"margin-top: 50px;\", 4, \"ngIf\"], [\"style\", \"height: 418px;\", 4, \"ngIf\"], [1, \"menu\"], [1, \"view\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\"], [1, \"display\"], [2, \"text-align\", \"center\", \"font-size\", \"20px\"], [3, \"src\", \"alt\"], [2, \"margin-top\", \"15px\"], [\"mat-raised-button\", \"\", 1, \"but2\", 3, \"click\"], [2, \"position\", \"absolute\", \"left\", \"2%\", \"bottom\", \"3%\"], [\"color\", \"primary\", \"mode\", \"determinate\", 1, \"example-margin\", 3, \"value\"], [2, \"margin-top\", \"50px\"], [1, \"deviceview\"], [\"class\", \"devicecard\", 4, \"ngFor\", \"ngForOf\"], [1, \"devicecard\"], [1, \"devicedisplay\"], [2, \"height\", \"418px\"], [2, \"margin\", \"50px\", \"text-align\", \"center\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"div\");\n        i0.ɵɵtemplate(2, OrderComponent_div_2_Template, 4, 1, \"div\", 0);\n        i0.ɵɵtemplate(3, OrderComponent_div_3_Template, 3, 1, \"div\", 1);\n        i0.ɵɵtemplate(4, OrderComponent_div_4_Template, 3, 0, \"div\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"app-footer\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.deviceXs);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.deviceXs);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.len);\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.MatButton, i7.MatCard, i8.MatProgressBar, i9.HeaderComponent, i10.FooterComponent],\n    styles: [\".menu[_ngcontent-%COMP%]{width:100%;height:100%;font-family:sans-serif}.card[_ngcontent-%COMP%]{width:20%;margin-top:50px;margin-left:100px;display:inline-flex;text-align:center;justify-content:center}.card[_ngcontent-%COMP%]   .display[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;height:200px;margin-bottom:10px}.display[_ngcontent-%COMP%]{display:block}.but1[_ngcontent-%COMP%]{background-color:#b641e4;color:#fff;font-size:12px}.but2[_ngcontent-%COMP%]{background-color:#12f578;color:#000;font-size:12px;width:100px;margin-left:55px;margin-bottom:65px}.deviceview[_ngcontent-%COMP%]{margin-left:10%;margin-top:22%;margin-right:10%}.devicecard[_ngcontent-%COMP%]{width:90%;margin-bottom:10px}.devicecard[_ngcontent-%COMP%]   .devicedisplay[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;margin-bottom:10px;border-radius:15px}.place1[_ngcontent-%COMP%]{background-color:#f5ae45;color:#fff;margin-left:80%;margin-top:50px;margin-bottom:30px;font-size:25px;height:45px}.place[_ngcontent-%COMP%]{background-color:#f5ae45;color:#fff;margin-left:65%;margin-top:50px;margin-bottom:30px}.example-margin[_ngcontent-%COMP%]{position:absolute;left:5%;bottom:2%;width:80%}mat-progress-bar[_ngcontent-%COMP%]{height:12px}\"]\n  });\n  return OrderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}